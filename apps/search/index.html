<!doctype html>
<html lang="en" joblist-layout>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>@joblist/components/search</title>
		<script type="module" src="../../src/index.js"></script>
		<script type="module">
			(({ query = "" }) => {
				const $search = document.createElement("joblist-search");
				const $results = document.createElement("joblist-results");
				$search.addEventListener("search", ({ detail }) => {
					if (detail.companies || detail.jobs) {
						$results.setAttribute("results", JSON.stringify(detail));
					} else {
						$results.removeAttribute("results");
					}
				});
				if (query) {
					$search.setAttribute("query", query);
				}
				document
					.querySelector("joblist-page-main")
					.append($search, document.createElement("hr"), $results);
			})(Object.fromEntries(new URLSearchParams(window.location.search)));
		</script>
	</head>
	<body>
		<joblist-layout>
			<joblist-menu show-favicon="true" show-default="true"></joblist-menu>
			<joblist-page>
				<joblist-page-main> </joblist-page-main>
				<joblist-page-footer>
					<footer>
						<hr />
						<dl>
							<dt>
								<a href="./"> Search </a>
							</dt>
							<dd>
								Explore companies and jobs indices with
								<a
									href="https://www.sqlite.org/fts3.html#full_text_index_queries"
									>full text (3) search syntax</a
								>, or on the
								<a
									href="https://sqlime.org/#https://joblist.gitlab.io/workers/joblist.db"
									>sqlite3 database</a
								>.
							</dd>
						</dl>
					</footer>
				</joblist-page-footer>
			</joblist-page>
		</joblist-layout>
	</body>
</html>
